<%- include("partials/header") %>



<div class="centered-form">
<div class="container">
  <h1>Welcome, <%= user.first_name %>!</h1>
  <p class="subtitle">You are now a members-only user.</p>

  <section class="post-section">
    <h2>Club Posts</h2>

    <% if (posts.length > 0) { %>
      <ul class="post-list">
        <% posts.forEach(post => { %>
          <li class="post-item">
            <h3><%= post.post_title %></h3>
            <p><%= post.post_body %></p>
            <small>
              Posted by 
              <%= post.first_name ? post.first_name : "Unknown" %>
              <%= post.last_name ? post.last_name : "" %>
              on <%= new Date(post.posted_at).toLocaleString() %>
            </small>
          </li>
        <% }) %>
      </ul>
    <% } else { %>
      <p class="no-posts">No posts yet. Be the first to write one!</p>
    <% } %>
  </section>

  <section class="new-post">
    <h3>Create a New Post</h3>
    <form action="/members" method="POST">
      <input type="text" name="post_title" placeholder="Title" required>
      <textarea name="post_body" placeholder="Write your post..." required></textarea>
      <button type="submit">Post</button>
    </form>
  </section>

  <a class="logout" href="/log-out">Logout</a>
</div>
</div>

<%- include("partials/footer") %>
